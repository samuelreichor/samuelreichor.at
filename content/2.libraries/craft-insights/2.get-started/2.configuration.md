---
title: 'Configuration'
description: 'Learn about all available configuration options for the Insights plugin.'
---

## Control Panel
You can manage configuration settings through the Control Panel by visiting Settings â†’ Insights.

## Settings

You can define a multi environment aware config in `/config/insights.php`. Settings defined in the config file override control panel settings.

### `enabled`

Enable or disable all tracking globally.

```php
return [
  '*' => [
    'enabled' => true,
  ],
  'staging' => [
    'enabled' => false, // disable tracking on staging
  ],
]
```

### `respectDoNotTrack`

Honor the browser's Do Not Track (DNT) header. When enabled, requests with `DNT: 1` header are not tracked.

```php
return [
  '*' => [
    'respectDoNotTrack' => true, // default
  ],
]
```

### `excludeLoggedInUsers`

Skip tracking for authenticated Craft users. Useful to exclude your own team from analytics.

```php
return [
  '*' => [
    'excludeLoggedInUsers' => false, // default
  ],
  'production' => [
    'excludeLoggedInUsers' => true, // don't track logged in users in production
  ],
]
```

### `excludedIpRanges`

IP addresses or CIDR ranges to exclude from tracking.

```php
return [
  '*' => [
    'excludedIpRanges' => [
      '192.168.1.1',       // single IP
      '10.0.0.0/8',        // CIDR range
      '172.16.0.0/12',     // private network
    ],
  ],
]
```

### `excludedPaths`

URL paths to exclude from tracking. Uses prefix matching.

```php
return [
  '*' => [
    'excludedPaths' => [
      '/admin',       // matches /admin, /admin/*, etc.
      '/cpresources',
      '/actions',
      '/api',         // exclude API endpoints
      '/preview',     // exclude preview pages
    ],
  ],
]
```

### `geoIpDatabasePath` :badge{label="Pro"}

Path to the MaxMind GeoLite2-Country database for country tracking.

```php
return [
  '*' => [
    'geoIpDatabasePath' => '@storage/geoip/GeoLite2-Country.mmdb', // default
  ],
]
```

::alert{variant="note"}
Without the GeoIP database, country tracking will be silently skipped. All other features work normally. See [Installation](/libraries/craft-insights/get-started/installation#geoip-database-pro) for setup instructions.
::

### `dataRetentionDays`

Number of days to retain analytics data. Valid range: 1-730 days.

```php
return [
  '*' => [
    'dataRetentionDays' => 365, // default: keep data for 1 year
  ],
]
```

### `autoCleanup`

Automatically delete data older than `dataRetentionDays`. Cleanup runs daily via Craft's garbage collection.

```php
return [
  '*' => [
    'autoCleanup' => true, // default
  ],
]
```

::alert{variant="warning"}
Cleanup is irreversible. Old data is permanently deleted.
::

### `useQueue`

Process tracking events asynchronously via Craft's queue system. Recommended for production to minimize page load impact.

```php
return [
  '*' => [
    'useQueue' => true, // default
  ],
  'dev' => [
    'useQueue' => false, // process synchronously in development
  ],
]
```

### `realtimeTtl`

How long (in seconds) a visitor is considered "active" for real-time tracking. Valid range: 60-900 seconds.

```php
return [
  '*' => [
    'realtimeTtl' => 300, // default: 5 minutes
  ],
]
```

### `defaultDateRange`

Default date range for the analytics dashboard. Available values: `today`, `7d`, `30d`, `90d`, `12m`.

```php
return [
  '*' => [
    'defaultDateRange' => '30d', // default
  ],
]
```

### `showRealtimeWidget`

Show the real-time visitors widget on the dashboard.

```php
return [
  '*' => [
    'showRealtimeWidget' => true, // default
  ],
]
```

### `showEntrySidebar`

Display analytics statistics in the entry editor sidebar.

```php
return [
  '*' => [
    'showEntrySidebar' => true, // default
  ],
]
```

### `logLevel`

Control the verbosity of plugin logging. Available values: `default`, `verbose`, `debug`.

```php
return [
  '*' => [
    'logLevel' => 'default',
  ],
  'dev' => [
    'logLevel' => 'debug', // more detailed logs in development
  ],
]
```

## Multi-Environment Example

A complete example showing environment-specific configuration:

```php
<?php
// config/insights.php

use craft\helpers\App;

return [
  '*' => [
    'enabled' => true,
    'respectDoNotTrack' => true,
    'excludeLoggedInUsers' => false,
    'excludedPaths' => ['/admin', '/cpresources', '/actions'],
    'dataRetentionDays' => 365,
    'autoCleanup' => true,
    'useQueue' => true,
    'defaultDateRange' => '30d',
  ],
  'dev' => [
    'useQueue' => false,
    'logLevel' => 'debug',
  ],
  'staging' => [
    'enabled' => App::env('INSIGHTS_ENABLED') ?? false,
  ],
  'production' => [
    'excludeLoggedInUsers' => true,
  ],
];
```
